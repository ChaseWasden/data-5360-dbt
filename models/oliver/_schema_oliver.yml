version: 2

models:
  - name: oliver_dim_customer
    description: "oliver customer Dimension"
    columns:
      - name: customer_key
        tests:
          - unique
  - name: oliver_dim_date
    description: "oliver date Dimension"
  - name: oliver_dim_employee
    description: "oliver employee Dimension"
  - name: oliver_dim_product
    description: "oliver product Dimension"
  - name: oliver_dim_store
    description: "oliver store Dimension"
  - name: fact_sales
    description: "oliver sales Fact"
    columns:
      - name: customer_key
        description: "A foreign key to the customer dimension"
        tests:
          - not_null
  - name: stg_employee_certifications
    description: >
      Staging view of employee certification events from oliver_landing.employee_certifications.
      Parses JSON field `certification_json` into columns and standardizes types.
    columns:
      - name: certification_name
        tests:
          - not_null
          - accepted_values:
              values:
                - "Product Knowledge Level 2"
                - "Point of Sale Operations"
                - "Conflict Resolution"
                - "Leadership and Coaching"
                - "Inventory Management"
                - "Cash Handling and Security"
                - "Strategic Retail Operations"
                - "Customer Service Excellence"
                - "Workplace Safety"
  - name: fact_certification
    description: >
      Fact table at the grain of one row per (employee_key, date_key, certification_name).
      Stores employee certification events with their monetary cost, linked to dim_employee
      and dim_date for conformed reporting.
    columns:
      - name: employee_key
        tests:
          - relationships:
              to: ref('oliver_dim_employee')
              field: employee_key
